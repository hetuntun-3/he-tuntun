:root{
  --text:#5a4a52;
  --soft:#7a6670;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }

body{
  margin:0;
  overflow:hidden;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color: var(--text);

  background:
    radial-gradient(900px 700px at 50% 25%, #ffd6e7 0%, #fff0f6 55%, #ffffff 100%);
}

/* Top title */
.top{
  position: fixed;
  top: max(18px, env(safe-area-inset-top));
  left: 18px;
  right: 18px;
  z-index: 20;
}
.top h1{
  margin:0;
  font-size:44px;
  letter-spacing:.2px;
}

/* Fullscreen stage */
.stage{
  position: fixed;
  inset: 0;
  overflow:hidden;
}

/* Controls */
.controls{
  position: fixed;
  left: 18px;
  bottom: max(18px, env(safe-area-inset-bottom));
  z-index: 20;

  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}

button{
  border:1px solid rgba(0,0,0,.12);
  background: rgba(255,255,255,.55);
  color: var(--text);
  padding:10px 12px;
  border-radius:14px;
  cursor:pointer;
  font-weight:700;
  backdrop-filter: blur(10px);
}
button:active{ transform: translateY(1px); }

.toggle{
  display:flex;
  gap:8px;
  align-items:center;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.12);
  background: rgba(255,255,255,.55);
  backdrop-filter: blur(10px);
  font-weight:700;
}

/* Puffer */
.puffer{
  position: fixed;
  left: 0px;
  top: 0px;
  touch-action:none;
  user-select:none;
  -webkit-user-select:none;
  cursor:grab;
  z-index: 10;
}
.puffer:active{ cursor:grabbing; }

.puffer.plushImg{
  width: 260px;
  height: 260px;
}

#pufferImg{
  width: 100%;
  height: 100%;
  object-fit: contain;
  user-select: none;
  -webkit-user-drag: none;
  transform-origin: 50% 60%;
  filter: drop-shadow(0 22px 30px rgba(0,0,0,.18));
  animation: plushFloat 2.8s ease-in-out infinite;
}

@keyframes plushFloat{
  0%   { transform: translateY(0) rotate(-1deg) scale(1); }
  50%  { transform: translateY(-7px) rotate(1deg) scale(1.02); }
  100% { transform: translateY(0) rotate(-1deg) scale(1); }
}

.puffed #pufferImg{
  animation: none;
  transform: scale(1.18);
  transition: transform 180ms ease;
}

/* Heart bubble */
.bubble{
  position: fixed;
  width: 20px;
  height: 20px;
  background: var(--heart, #ff7fa3);
  transform: rotate(-45deg);
  opacity: .95;

  /* slower float */
  animation: floatUp var(--dur, 4.2s) ease-out forwards;
  z-index: 6;
}

.bubble::before,
.bubble::after{
  content:"";
  position:absolute;
  width:20px;
  height:20px;
  background: var(--heart, #ff7fa3);
  border-radius:50%;
}

.bubble::before{ top:-10px; left:0; }
.bubble::after{ left:10px; top:0; }

@keyframes floatUp{
  from { transform: translateY(0) rotate(-45deg) scale(1); opacity:1; }
  to   { transform: translateY(-110vh) rotate(-45deg) scale(1.25); opacity:0; }
}

